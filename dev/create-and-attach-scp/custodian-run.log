2025-03-21 14:52:14,769 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 14:52:14,772 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 212, in process
    client = local_session(self.manager.session_factory).client("organizations")
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\client.py", line 71, in client
    return client
           ^^^^^^
UnboundLocalError: cannot access local variable 'client' where it is not associated with a value
2025-03-21 14:53:41,371 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 14:53:42,262 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 14:53:42,263 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 14:53:43,057 - custodian.huaweicloud.query - INFO - client response : {"policies": [{"is_builtin": false, "description": "", "id": "p-4ncc1gg34kj8iis5479yc1ezymno5slt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt", "name": "tag-tmuntces", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "name": "7777777777777777777", "type": "tag_policy"}, {"is_builtin": false, "description": "776578538", "id": "p-8cpac5vs39noe5lmz1khmiyplpeha7up", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up", "name": "tag-lbvxbzdq", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "name": "tag-b9vfcca0", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "name": "tag-mm9kot2h", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "name": "tag-nf509hch", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "name": "tag-uwp06af6", "type": "tag_policy"}, {"is_builtin": true, "description": "Full Access,", "id": "p-full_access", "urn": "organizations::system:policy:service_control_policy/p-full_access", "name": "FullAccess", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-hx6wedi5glocyomkl4bp2xu2habx10m1", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1", "name": "scp-3j5xtatc", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "name": "tag-tubob1js", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "name": "tag-v3k5m4du", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "name": "tag-1b8591c8", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "name": "tag-xi0xlt2n", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "name": "tag-0qoa9k2q", "type": "tag_policy"}], "page_info": {"current_count": 14}}
2025-03-21 14:53:43,059 - custodian.huaweicloud.query - INFO - client res : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 14:53:43,067 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 224, in ensure_scp
    if p["Name"] == self.data["name"]:
       ~^^^^^^^^
KeyError: 'Name'
2025-03-21 14:55:15,273 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 14:55:16,031 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 14:55:16,050 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 225, in ensure_scp
    if p["Name"] == self.data["name"]:
       ~^^^^^^^^
KeyError: 'Name'
2025-03-21 14:56:21,762 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 14:56:22,541 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : <c7n_huaweicloud.resources.organizations.SetPolicy object at 0x000001B4A2511590>
2025-03-21 14:56:22,547 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 14:56:22,550 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 238, in ensure_scp
    response = client.create_policy(
        Name=self.data["name"],
    ...<3 lines>...
        Tags=ptags,
    )
TypeError: OrganizationsClient.create_policy() got an unexpected keyword argument 'Name'
2025-03-21 14:56:55,760 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 14:56:56,474 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'SERVICE_CONTROL_POLICY', 'name': 'RestrictedRootAccount', 'contents': {'Version': '2012-10-17', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ec2:*'], 'Resource': ['*'], 'Condition': {'StringLike': {'aws:PrincipalArn': ['arn:aws:iam::*:root']}}}]}}
2025-03-21 14:56:56,488 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 14:56:56,528 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 238, in ensure_scp
    response = client.create_policy(
        Name=self.data["name"],
    ...<3 lines>...
        Tags=ptags,
    )
TypeError: OrganizationsClient.create_policy() got an unexpected keyword argument 'Name'
2025-03-21 15:14:30,395 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:14:30,395 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:14:31,204 - custodian.huaweicloud.query - INFO - client response : {"organizational_units": [{"id": "ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "name": "ConsoleÕ≈∂”", "created_at": "2023-07-20T02:09:29+00:00"}, {"id": "ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "name": "0312001", "created_at": "2024-03-12T14:22:36+00:00"}, {"id": "ou-iboyul26waddh86hhipw97sbh3masg94", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94", "name": "55555", "created_at": "2024-03-12T14:36:45+00:00"}, {"id": "ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "name": "rrr333", "created_at": "2024-03-12T14:35:49+00:00"}, {"id": "ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "name": "test3", "created_at": "2024-01-04T13:38:28+00:00"}, {"id": "ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "name": "q0312001", "created_at": "2024-03-12T14:34:48+00:00"}, {"id": "ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "name": "test1", "created_at": "2024-01-04T13:37:54+00:00"}, {"id": "ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "name": "test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555", "created_at": "2024-01-04T13:38:36+00:00"}, {"id": "ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "name": "IAM≤¶≤‚’À∫≈", "created_at": "2023-07-28T06:44:17+00:00"}], "page_info": {"current_count": 9}}
2025-03-21 15:14:31,206 - custodian.huaweicloud.query - INFO - client res : [{'id': 'ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'name': 'ConsoleÕ≈∂”', 'created_at': '2023-07-20T02:09:29+00:00'}, {'id': 'ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'name': '0312001', 'created_at': '2024-03-12T14:22:36+00:00'}, {'id': 'ou-iboyul26waddh86hhipw97sbh3masg94', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94', 'name': '55555', 'created_at': '2024-03-12T14:36:45+00:00'}, {'id': 'ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'name': 'rrr333', 'created_at': '2024-03-12T14:35:49+00:00'}, {'id': 'ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'name': 'test3', 'created_at': '2024-01-04T13:38:28+00:00'}, {'id': 'ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'name': 'q0312001', 'created_at': '2024-03-12T14:34:48+00:00'}, {'id': 'ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'name': 'test1', 'created_at': '2024-01-04T13:37:54+00:00'}, {'id': 'ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'name': 'test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555', 'created_at': '2024-01-04T13:38:36+00:00'}, {'id': 'ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'name': 'IAM≤¶≤‚’À∫≈', 'created_at': '2023-07-28T06:44:17+00:00'}]
2025-03-21 15:14:31,213 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:1.53
2025-03-21 15:14:31,214 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'SERVICE_CONTROL_POLICY', 'name': 'RestrictedRootAccount', 'contents': {'Version': '2012-10-17', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ec2:*'], 'Resource': ['*'], 'Condition': {'StringLike': {'aws:PrincipalArn': ['arn:aws:iam::*:root']}}}]}}
2025-03-21 15:14:31,216 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:14:31,216 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:14:32,007 - custodian.huaweicloud.query - INFO - client response : {"policies": [{"is_builtin": false, "description": "", "id": "p-4ncc1gg34kj8iis5479yc1ezymno5slt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt", "name": "tag-tmuntces", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "name": "7777777777777777777", "type": "tag_policy"}, {"is_builtin": false, "description": "776578538", "id": "p-8cpac5vs39noe5lmz1khmiyplpeha7up", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up", "name": "tag-lbvxbzdq", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "name": "tag-b9vfcca0", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "name": "tag-mm9kot2h", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "name": "tag-nf509hch", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "name": "tag-uwp06af6", "type": "tag_policy"}, {"is_builtin": true, "description": "Full Access,", "id": "p-full_access", "urn": "organizations::system:policy:service_control_policy/p-full_access", "name": "FullAccess", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-hx6wedi5glocyomkl4bp2xu2habx10m1", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1", "name": "scp-3j5xtatc", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "name": "tag-tubob1js", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "name": "tag-v3k5m4du", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "name": "tag-1b8591c8", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "name": "tag-xi0xlt2n", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "name": "tag-0qoa9k2q", "type": "tag_policy"}], "page_info": {"current_count": 14}}
2025-03-21 15:14:32,009 - custodian.huaweicloud.query - INFO - client res : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:14:32,018 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:14:32,736 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://organizations.myhuaweicloud.com/v1/organizations/policies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 238, in ensure_scp
    response = client.create_policy(
        CreatePolicyRequest(CreatePolicyReqBody(name=self.data["name"],
    ...<3 lines>...
        tags=ptags,))
    )
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2561, in create_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:401,request_id:b8e7a618c4c634fdb71a8d2d50412aa0,error_code:APIGW.0301,error_msg:Incorrect IAM authentication information: Unauthorized,encoded_authorization_message:None }
2025-03-21 15:19:17,821 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:19:18,566 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'SERVICE_CONTROL_POLICY', 'name': 'RestrictedRootAccount', 'contents': {'Version': '2012-10-17', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ec2:*'], 'Resource': ['*'], 'Condition': {'StringLike': {'aws:PrincipalArn': ['arn:aws:iam::*:root']}}}]}}
2025-03-21 15:19:18,568 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:19:19,279 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://organizations.myhuaweicloud.com/v1/organizations/policies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 246, in ensure_scp
    response = client.create_policy(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2561, in create_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:400,request_id:78adbbff6cfc3dbf0b99784b41389080,error_code:SYS.0400,error_msg:'type' is enum, valid value is [service_control_policy,tag_policy], Unexpected value 'SERVICE_CONTROL_POLICY',encoded_authorization_message:None }
2025-03-21 15:22:18,051 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:22:18,790 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '2012-10-17', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ec2:*'], 'Resource': ['*']}]}}
2025-03-21 15:22:18,791 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:22:18,792 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:22:19,646 - custodian.huaweicloud.query - INFO - client response : {"policies": [{"is_builtin": false, "description": "", "id": "p-4ncc1gg34kj8iis5479yc1ezymno5slt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt", "name": "tag-tmuntces", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "name": "7777777777777777777", "type": "tag_policy"}, {"is_builtin": false, "description": "776578538", "id": "p-8cpac5vs39noe5lmz1khmiyplpeha7up", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up", "name": "tag-lbvxbzdq", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "name": "tag-b9vfcca0", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "name": "tag-mm9kot2h", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "name": "tag-nf509hch", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "name": "tag-uwp06af6", "type": "tag_policy"}, {"is_builtin": true, "description": "Full Access,", "id": "p-full_access", "urn": "organizations::system:policy:service_control_policy/p-full_access", "name": "FullAccess", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-hx6wedi5glocyomkl4bp2xu2habx10m1", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1", "name": "scp-3j5xtatc", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "name": "tag-tubob1js", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "name": "tag-v3k5m4du", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "name": "tag-1b8591c8", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "name": "tag-xi0xlt2n", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "name": "tag-0qoa9k2q", "type": "tag_policy"}], "page_info": {"current_count": 14}}
2025-03-21 15:22:19,648 - custodian.huaweicloud.query - INFO - client res : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:22:19,660 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:22:20,417 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://organizations.myhuaweicloud.com/v1/organizations/policies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 244, in ensure_scp
    response = client.create_policy(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2561, in create_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:400,request_id:df23ca10ff4941daddfdec4b2b9e34c8,error_code:SYS.0400,error_msg:attribute 'tags[0].value' must not be null,encoded_authorization_message:None }
2025-03-21 15:32:18,805 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:32:18,805 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:32:19,666 - custodian.huaweicloud.query - INFO - client response : {"organizational_units": [{"id": "ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "name": "ConsoleÕ≈∂”", "created_at": "2023-07-20T02:09:29+00:00"}, {"id": "ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "name": "0312001", "created_at": "2024-03-12T14:22:36+00:00"}, {"id": "ou-iboyul26waddh86hhipw97sbh3masg94", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94", "name": "55555", "created_at": "2024-03-12T14:36:45+00:00"}, {"id": "ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "name": "rrr333", "created_at": "2024-03-12T14:35:49+00:00"}, {"id": "ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "name": "test3", "created_at": "2024-01-04T13:38:28+00:00"}, {"id": "ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "name": "q0312001", "created_at": "2024-03-12T14:34:48+00:00"}, {"id": "ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "name": "test1", "created_at": "2024-01-04T13:37:54+00:00"}, {"id": "ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "name": "test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555", "created_at": "2024-01-04T13:38:36+00:00"}, {"id": "ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "name": "IAM≤¶≤‚’À∫≈", "created_at": "2023-07-28T06:44:17+00:00"}], "page_info": {"current_count": 9}}
2025-03-21 15:32:19,668 - custodian.huaweicloud.query - INFO - client res : [{'id': 'ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'name': 'ConsoleÕ≈∂”', 'created_at': '2023-07-20T02:09:29+00:00'}, {'id': 'ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'name': '0312001', 'created_at': '2024-03-12T14:22:36+00:00'}, {'id': 'ou-iboyul26waddh86hhipw97sbh3masg94', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94', 'name': '55555', 'created_at': '2024-03-12T14:36:45+00:00'}, {'id': 'ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'name': 'rrr333', 'created_at': '2024-03-12T14:35:49+00:00'}, {'id': 'ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'name': 'test3', 'created_at': '2024-01-04T13:38:28+00:00'}, {'id': 'ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'name': 'q0312001', 'created_at': '2024-03-12T14:34:48+00:00'}, {'id': 'ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'name': 'test1', 'created_at': '2024-01-04T13:37:54+00:00'}, {'id': 'ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'name': 'test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555', 'created_at': '2024-01-04T13:38:36+00:00'}, {'id': 'ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'name': 'IAM≤¶≤‚’À∫≈', 'created_at': '2023-07-28T06:44:17+00:00'}]
2025-03-21 15:32:19,675 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:1.66
2025-03-21 15:32:19,676 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '2012-10-17', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ec2:*'], 'Resource': ['*']}]}}
2025-03-21 15:32:19,678 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:32:21,249 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://organizations.myhuaweicloud.com/v1/organizations/policies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 244, in ensure_scp
    response = client.create_policy(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2561, in create_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:400,request_id:21af5207742a5f2e7e3ff6b09387a443,error_code:Organizations.1608,error_msg:wrong format for policy content,encoded_authorization_message:None }
2025-03-21 15:33:20,209 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:33:20,927 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '2012-10-17', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ec2:*'], 'Resource': ['*']}]}}
2025-03-21 15:33:20,929 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:33:20,932 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"RestrictEC2ForRoot\", \"Effect\": \"Deny\", \"Action\": [\"ec2:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedRootAccount (custodian managed)", "name": "RestrictedRootAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 15:33:21,734 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://organizations.myhuaweicloud.com/v1/organizations/policies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 245, in ensure_scp
    response = client.create_policy(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2561, in create_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:400,request_id:8791249613fcf625b3dab941a43f6758,error_code:Organizations.1608,error_msg:wrong format for policy content,encoded_authorization_message:None }
2025-03-21 15:39:18,749 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.01
2025-03-21 15:39:19,492 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:39:19,494 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:39:19,495 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:39:20,311 - custodian.huaweicloud.query - INFO - client response : {"policies": [{"is_builtin": false, "description": "", "id": "p-4ncc1gg34kj8iis5479yc1ezymno5slt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt", "name": "tag-tmuntces", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "name": "7777777777777777777", "type": "tag_policy"}, {"is_builtin": false, "description": "776578538", "id": "p-8cpac5vs39noe5lmz1khmiyplpeha7up", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up", "name": "tag-lbvxbzdq", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "name": "tag-b9vfcca0", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "name": "tag-mm9kot2h", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "name": "tag-nf509hch", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "name": "tag-uwp06af6", "type": "tag_policy"}, {"is_builtin": true, "description": "Full Access,", "id": "p-full_access", "urn": "organizations::system:policy:service_control_policy/p-full_access", "name": "FullAccess", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-hx6wedi5glocyomkl4bp2xu2habx10m1", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1", "name": "scp-3j5xtatc", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "name": "tag-tubob1js", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "name": "tag-v3k5m4du", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "name": "tag-1b8591c8", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "name": "tag-xi0xlt2n", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "name": "tag-0qoa9k2q", "type": "tag_policy"}], "page_info": {"current_count": 14}}
2025-03-21 15:39:20,314 - custodian.huaweicloud.query - INFO - client res : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:39:20,321 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:39:20,323 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"5.0\", \"Statement\": [{\"Sid\": \"RestrictEC2ForRoot\", \"Effect\": \"Deny\", \"Action\": [\"ecs:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedRootAccount (custodian managed)", "name": "RestrictedRootAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 15:39:21,157 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 246, in ensure_scp
    return response["Policy"]["PolicySummary"]["Id"]
           ~~~~~~~~^^^^^^^^^^
TypeError: 'CreatePolicyResponse' object is not subscriptable
2025-03-21 15:40:02,817 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:40:03,561 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:40:03,563 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:40:03,565 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"5.0\", \"Statement\": [{\"Sid\": \"RestrictEC2ForRoot\", \"Effect\": \"Deny\", \"Action\": [\"ecs:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedRootAccount (custodian managed)", "name": "RestrictedRootAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 15:40:04,416 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"policy": {"content": "{\"Version\":\"5.0\",\"Statement\":[{\"Sid\":\"RestrictEC2ForRoot\",\"Effect\":\"Deny\",\"Action\":[\"ecs:*\"],\"Resource\":[\"*\"]}]}", "policy_summary": {"is_builtin": false, "description": "RestrictedRootAccount (custodian managed)", "id": "p-itvpoxuh0gv9z9uzmvi903a50th0zbzt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-itvpoxuh0gv9z9uzmvi903a50th0zbzt", "name": "RestrictedRootAccount", "type": "service_control_policy"}}}
2025-03-21 15:40:04,417 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 247, in ensure_scp
    return response["policy"]["policySummary"]["id"]
           ~~~~~~~~^^^^^^^^^^
TypeError: 'CreatePolicyResponse' object is not subscriptable
2025-03-21 15:41:57,607 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:41:58,321 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:41:58,322 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:41:58,324 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"5.0\", \"Statement\": [{\"Sid\": \"RestrictEC2ForRoot\", \"Effect\": \"Deny\", \"Action\": [\"ecs:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedRootAccount (custodian managed)", "name": "RestrictedRootAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 15:41:59,181 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy response : {"policy": {"content": "{\"Version\":\"5.0\",\"Statement\":[{\"Sid\":\"RestrictEC2ForRoot\",\"Effect\":\"Deny\",\"Action\":[\"ecs:*\"],\"Resource\":[\"*\"]}]}", "policy_summary": {"is_builtin": false, "description": "RestrictedRootAccount (custodian managed)", "id": "p-2fp2qwpo8n25hkgnaiiiqhl8qezw3e2f", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-2fp2qwpo8n25hkgnaiiiqhl8qezw3e2f", "name": "RestrictedRootAccount", "type": "service_control_policy"}}}
2025-03-21 15:41:59,182 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 247, in ensure_scp
    return response["policy"]["policy_summary"]["id"]
           ~~~~~~~~^^^^^^^^^^
TypeError: 'CreatePolicyResponse' object is not subscriptable
2025-03-21 15:46:45,020 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:46:45,759 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:46:45,760 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:46:45,762 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"5.0\", \"Statement\": [{\"Sid\": \"RestrictEC2ForRoot\", \"Effect\": \"Deny\", \"Action\": [\"ecs:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedRootAccount (custodian managed)", "name": "RestrictedRootAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 15:46:46,659 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 409 Client Error: Conflict for url: https://organizations.myhuaweicloud.com/v1/organizations/policies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 245, in ensure_scp
    response = client.create_policy(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2561, in create_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:409,request_id:7d22bc729f07820017c1218907dfd0d6,error_code:Organizations.1612,error_msg:conflict for policy, policy names must be unique within a organization.,encoded_authorization_message:None }
2025-03-21 15:46:59,751 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:47:00,464 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:47:00,466 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:47:00,467 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"5.0\", \"Statement\": [{\"Sid\": \"RestrictEC2ForRoot\", \"Effect\": \"Deny\", \"Action\": [\"ecs:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedRootAccount (custodian managed)", "name": "RestrictedRootAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 15:47:01,247 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy response : {"policy": {"content": "{\"Version\":\"5.0\",\"Statement\":[{\"Sid\":\"RestrictEC2ForRoot\",\"Effect\":\"Deny\",\"Action\":[\"ecs:*\"],\"Resource\":[\"*\"]}]}", "policy_summary": {"is_builtin": false, "description": "RestrictedRootAccount (custodian managed)", "id": "p-eo4w7f2yby7va7ueioccfpqij71hg67a", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a", "name": "RestrictedRootAccount", "type": "service_control_policy"}}}
2025-03-21 15:47:01,248 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    self.manager.retry(client.attach_policy, TargetId=r["Id"], PolicyId=pid)
                                                      ~^^^^^^
KeyError: 'Id'
2025-03-21 15:48:10,103 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:48:10,104 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:48:10,930 - custodian.huaweicloud.query - INFO - client response : {"organizational_units": [{"id": "ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "name": "ConsoleÕ≈∂”", "created_at": "2023-07-20T02:09:29+00:00"}, {"id": "ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "name": "0312001", "created_at": "2024-03-12T14:22:36+00:00"}, {"id": "ou-iboyul26waddh86hhipw97sbh3masg94", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94", "name": "55555", "created_at": "2024-03-12T14:36:45+00:00"}, {"id": "ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "name": "rrr333", "created_at": "2024-03-12T14:35:49+00:00"}, {"id": "ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "name": "test3", "created_at": "2024-01-04T13:38:28+00:00"}, {"id": "ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "name": "q0312001", "created_at": "2024-03-12T14:34:48+00:00"}, {"id": "ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "name": "test1", "created_at": "2024-01-04T13:37:54+00:00"}, {"id": "ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "name": "test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555", "created_at": "2024-01-04T13:38:36+00:00"}, {"id": "ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "name": "IAM≤¶≤‚’À∫≈", "created_at": "2023-07-28T06:44:17+00:00"}], "page_info": {"current_count": 9}}
2025-03-21 15:48:10,932 - custodian.huaweicloud.query - INFO - client res : [{'id': 'ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'name': 'ConsoleÕ≈∂”', 'created_at': '2023-07-20T02:09:29+00:00'}, {'id': 'ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'name': '0312001', 'created_at': '2024-03-12T14:22:36+00:00'}, {'id': 'ou-iboyul26waddh86hhipw97sbh3masg94', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94', 'name': '55555', 'created_at': '2024-03-12T14:36:45+00:00'}, {'id': 'ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'name': 'rrr333', 'created_at': '2024-03-12T14:35:49+00:00'}, {'id': 'ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'name': 'test3', 'created_at': '2024-01-04T13:38:28+00:00'}, {'id': 'ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'name': 'q0312001', 'created_at': '2024-03-12T14:34:48+00:00'}, {'id': 'ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'name': 'test1', 'created_at': '2024-01-04T13:37:54+00:00'}, {'id': 'ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'name': 'test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555', 'created_at': '2024-01-04T13:38:36+00:00'}, {'id': 'ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'name': 'IAM≤¶≤‚’À∫≈', 'created_at': '2023-07-28T06:44:17+00:00'}]
2025-03-21 15:48:10,939 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:1.55
2025-03-21 15:48:10,940 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:48:10,943 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:48:10,944 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"5.0\", \"Statement\": [{\"Sid\": \"RestrictEC2ForRoot\", \"Effect\": \"Deny\", \"Action\": [\"ecs:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedRootAccount (custodian managed)", "name": "RestrictedRootAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 15:48:11,845 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 409 Client Error: Conflict for url: https://organizations.myhuaweicloud.com/v1/organizations/policies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 245, in ensure_scp
    response = client.create_policy(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2561, in create_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:409,request_id:abc95cb6eb10480e8b0687717e134490,error_code:Organizations.1612,error_msg:conflict for policy, policy names must be unique within a organization.,encoded_authorization_message:None }
2025-03-21 15:49:24,613 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:49:25,330 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:49:25,332 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:49:25,334 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"5.0\", \"Statement\": [{\"Sid\": \"RestrictEC2ForRoot\", \"Effect\": \"Deny\", \"Action\": [\"ecs:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedRootAccount (custodian managed)", "name": "RestrictedRootAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 15:49:26,274 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 409 Client Error: Conflict for url: https://organizations.myhuaweicloud.com/v1/organizations/policies

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 211, in process
    pid = self.ensure_scp(client)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 245, in ensure_scp
    response = client.create_policy(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2561, in create_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:409,request_id:edebd4cc5d48ace21d81492662319ef9,error_code:Organizations.1612,error_msg:conflict for policy, policy names must be unique within a organization.,encoded_authorization_message:None }
2025-03-21 15:50:22,555 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:50:22,555 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:50:23,304 - custodian.huaweicloud.query - INFO - client response : {"organizational_units": [{"id": "ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "name": "ConsoleÕ≈∂”", "created_at": "2023-07-20T02:09:29+00:00"}, {"id": "ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "name": "0312001", "created_at": "2024-03-12T14:22:36+00:00"}, {"id": "ou-iboyul26waddh86hhipw97sbh3masg94", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94", "name": "55555", "created_at": "2024-03-12T14:36:45+00:00"}, {"id": "ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "name": "rrr333", "created_at": "2024-03-12T14:35:49+00:00"}, {"id": "ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "name": "test3", "created_at": "2024-01-04T13:38:28+00:00"}, {"id": "ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "name": "q0312001", "created_at": "2024-03-12T14:34:48+00:00"}, {"id": "ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "name": "test1", "created_at": "2024-01-04T13:37:54+00:00"}, {"id": "ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "name": "test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555", "created_at": "2024-01-04T13:38:36+00:00"}, {"id": "ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "name": "IAM≤¶≤‚’À∫≈", "created_at": "2023-07-28T06:44:17+00:00"}], "page_info": {"current_count": 9}}
2025-03-21 15:50:23,306 - custodian.huaweicloud.query - INFO - client res : [{'id': 'ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'name': 'ConsoleÕ≈∂”', 'created_at': '2023-07-20T02:09:29+00:00'}, {'id': 'ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'name': '0312001', 'created_at': '2024-03-12T14:22:36+00:00'}, {'id': 'ou-iboyul26waddh86hhipw97sbh3masg94', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94', 'name': '55555', 'created_at': '2024-03-12T14:36:45+00:00'}, {'id': 'ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'name': 'rrr333', 'created_at': '2024-03-12T14:35:49+00:00'}, {'id': 'ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'name': 'test3', 'created_at': '2024-01-04T13:38:28+00:00'}, {'id': 'ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'name': 'q0312001', 'created_at': '2024-03-12T14:34:48+00:00'}, {'id': 'ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'name': 'test1', 'created_at': '2024-01-04T13:37:54+00:00'}, {'id': 'ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'name': 'test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555', 'created_at': '2024-01-04T13:38:36+00:00'}, {'id': 'ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'name': 'IAM≤¶≤‚’À∫≈', 'created_at': '2023-07-28T06:44:17+00:00'}]
2025-03-21 15:50:23,313 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:1.52
2025-03-21 15:50:23,314 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:50:23,316 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:50:23,317 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:50:24,081 - custodian.huaweicloud.query - INFO - client response : {"policies": [{"is_builtin": false, "description": "", "id": "p-4ncc1gg34kj8iis5479yc1ezymno5slt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt", "name": "tag-tmuntces", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "name": "7777777777777777777", "type": "tag_policy"}, {"is_builtin": false, "description": "776578538", "id": "p-8cpac5vs39noe5lmz1khmiyplpeha7up", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up", "name": "tag-lbvxbzdq", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "name": "tag-b9vfcca0", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "name": "tag-mm9kot2h", "type": "tag_policy"}, {"is_builtin": false, "description": "RestrictedRootAccount (custodian managed)", "id": "p-eo4w7f2yby7va7ueioccfpqij71hg67a", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a", "name": "RestrictedRootAccount", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "name": "tag-nf509hch", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "name": "tag-uwp06af6", "type": "tag_policy"}, {"is_builtin": true, "description": "Full Access,", "id": "p-full_access", "urn": "organizations::system:policy:service_control_policy/p-full_access", "name": "FullAccess", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-hx6wedi5glocyomkl4bp2xu2habx10m1", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1", "name": "scp-3j5xtatc", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "name": "tag-tubob1js", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "name": "tag-v3k5m4du", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "name": "tag-1b8591c8", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "name": "tag-xi0xlt2n", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "name": "tag-0qoa9k2q", "type": "tag_policy"}], "page_info": {"current_count": 15}}
2025-03-21 15:50:24,083 - custodian.huaweicloud.query - INFO - client res : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': 'RestrictedRootAccount (custodian managed)', 'id': 'p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'name': 'RestrictedRootAccount', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:50:24,090 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': 'RestrictedRootAccount (custodian managed)', 'id': 'p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'name': 'RestrictedRootAccount', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:50:24,093 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    self.manager.retry(client.attach_policy, TargetId=r["id"], PolicyId=pid)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not callable
2025-03-21 15:51:39,231 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:51:39,231 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:51:40,030 - custodian.huaweicloud.query - INFO - client response : {"organizational_units": [{"id": "ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe", "name": "ConsoleÕ≈∂”", "created_at": "2023-07-20T02:09:29+00:00"}, {"id": "ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi", "name": "0312001", "created_at": "2024-03-12T14:22:36+00:00"}, {"id": "ou-iboyul26waddh86hhipw97sbh3masg94", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94", "name": "55555", "created_at": "2024-03-12T14:36:45+00:00"}, {"id": "ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61", "name": "rrr333", "created_at": "2024-03-12T14:35:49+00:00"}, {"id": "ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0", "name": "test3", "created_at": "2024-01-04T13:38:28+00:00"}, {"id": "ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i", "name": "q0312001", "created_at": "2024-03-12T14:34:48+00:00"}, {"id": "ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9", "name": "test1", "created_at": "2024-01-04T13:37:54+00:00"}, {"id": "ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s", "name": "test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555", "created_at": "2024-01-04T13:38:36+00:00"}, {"id": "ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t", "name": "IAM≤¶≤‚’À∫≈", "created_at": "2023-07-28T06:44:17+00:00"}], "page_info": {"current_count": 9}}
2025-03-21 15:51:40,033 - custodian.huaweicloud.query - INFO - client res : [{'id': 'ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-45wgiopuu6mp05xi4ra1m9msn97fvvwe', 'name': 'ConsoleÕ≈∂”', 'created_at': '2023-07-20T02:09:29+00:00'}, {'id': 'ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-egmx31wae8c7v72jrl71ow6pb0cqz4fi', 'name': '0312001', 'created_at': '2024-03-12T14:22:36+00:00'}, {'id': 'ou-iboyul26waddh86hhipw97sbh3masg94', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-iboyul26waddh86hhipw97sbh3masg94', 'name': '55555', 'created_at': '2024-03-12T14:36:45+00:00'}, {'id': 'ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-karwoe0a7h4ldm0w2b8meuwwc5rhtg61', 'name': 'rrr333', 'created_at': '2024-03-12T14:35:49+00:00'}, {'id': 'ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-r4o9x4lx74qs310trcozj0e9k7r50oh0', 'name': 'test3', 'created_at': '2024-01-04T13:38:28+00:00'}, {'id': 'ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s0lm7bpry04gs574vy43xet6wluqtl6i', 'name': 'q0312001', 'created_at': '2024-03-12T14:34:48+00:00'}, {'id': 'ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-s5hdjvol2deqr9tzxby0urqa7ha8q0n9', 'name': 'test1', 'created_at': '2024-01-04T13:37:54+00:00'}, {'id': 'ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-tduzv40et3m0scbr0j1spthpr4ay2a8s', 'name': 'test4ou-tduzv40et3m0scthpr4ay2a8s3333333333333333333333333333555', 'created_at': '2024-01-04T13:38:36+00:00'}, {'id': 'ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:ou:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/ou-wpl4rl17z5v9puqohfeqo8brezsta85t', 'name': 'IAM≤¶≤‚’À∫≈', 'created_at': '2023-07-28T06:44:17+00:00'}]
2025-03-21 15:51:40,040 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:1.53
2025-03-21 15:51:40,041 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:51:40,044 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 15:51:40,044 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 15:51:40,788 - custodian.huaweicloud.query - INFO - client response : {"policies": [{"is_builtin": false, "description": "", "id": "p-4ncc1gg34kj8iis5479yc1ezymno5slt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt", "name": "tag-tmuntces", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k", "name": "7777777777777777777", "type": "tag_policy"}, {"is_builtin": false, "description": "776578538", "id": "p-8cpac5vs39noe5lmz1khmiyplpeha7up", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up", "name": "tag-lbvxbzdq", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68", "name": "tag-b9vfcca0", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune", "name": "tag-mm9kot2h", "type": "tag_policy"}, {"is_builtin": false, "description": "RestrictedRootAccount (custodian managed)", "id": "p-eo4w7f2yby7va7ueioccfpqij71hg67a", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a", "name": "RestrictedRootAccount", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj", "name": "tag-nf509hch", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh", "name": "tag-uwp06af6", "type": "tag_policy"}, {"is_builtin": true, "description": "Full Access,", "id": "p-full_access", "urn": "organizations::system:policy:service_control_policy/p-full_access", "name": "FullAccess", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-hx6wedi5glocyomkl4bp2xu2habx10m1", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1", "name": "scp-3j5xtatc", "type": "service_control_policy"}, {"is_builtin": false, "description": "", "id": "p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr", "name": "tag-tubob1js", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt", "name": "tag-v3k5m4du", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn", "name": "tag-1b8591c8", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65", "name": "tag-xi0xlt2n", "type": "tag_policy"}, {"is_builtin": false, "description": "", "id": "p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9", "name": "tag-0qoa9k2q", "type": "tag_policy"}], "page_info": {"current_count": 15}}
2025-03-21 15:51:40,791 - custodian.huaweicloud.query - INFO - client res : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': 'RestrictedRootAccount (custodian managed)', 'id': 'p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'name': 'RestrictedRootAccount', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:51:40,798 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': 'RestrictedRootAccount (custodian managed)', 'id': 'p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'name': 'RestrictedRootAccount', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:51:40,801 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 213, in process
    self.manager.retry(client.attach_policy, TargetId=r["id"], PolicyId=pid)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not callable
2025-03-21 15:56:32,741 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 15:56:33,437 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 15:56:33,439 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': 'RestrictedRootAccount (custodian managed)', 'id': 'p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'name': 'RestrictedRootAccount', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 15:56:36,521 - custodian.policy - INFO - policy:create-and-attach-scp action:setpolicy resources:9 execution_time:3.78
2025-03-21 16:00:34,533 - custodian.policy - INFO - policy:create-and-attach-scp resource:huaweicloud.org-unit region: count:9 time:0.00
2025-03-21 16:00:35,230 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedRootAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictEC2ForRoot', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 16:00:35,232 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': 'RestrictedRootAccount (custodian managed)', 'id': 'p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'name': 'RestrictedRootAccount', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 16:00:36,048 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 409 Client Error: Conflict for url: https://organizations.myhuaweicloud.com/v1/organizations/policies/p-eo4w7f2yby7va7ueioccfpqij71hg67a/attach

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\custodian\cloud-custodian\c7n\policy.py", line 364, in run
    results = a.process(resources)
  File "C:\custodian\cloud-custodian\tools\c7n_huaweicloud\c7n_huaweicloud\resources\organizations.py", line 215, in process
    client.attach_policy(request)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 2492, in attach_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkorganizations\v1\organizations_client.py", line 4010, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\http\http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\custodian\cloud-custodian\custodian\Lib\site-packages\huaweicloudsdkcore\exceptions\exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:409,request_id:87a35ce90474587d53dc48d65cc3c275,error_code:Organizations.1603,error_msg:conflict for policy attachment,encoded_authorization_message:None }
