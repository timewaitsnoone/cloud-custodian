2025-03-21 16:00:36,063 - custodian.huaweicloud.query - INFO - client request : {"limit": 200}
2025-03-21 16:00:36,063 - custodian.huaweicloud.query - INFO - client request : {'limit': 200}
2025-03-21 16:00:36,960 - custodian.huaweicloud.query - INFO - client response : {"accounts": [{"id": "8e5fe930d8454674a47c67abfb72e02c", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:account:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/8e5fe930d8454674a47c67abfb72e02c", "join_method": "invited", "status": "active", "joined_at": "2023-07-20T02:07:56+00:00", "name": "hwstaff_intl_tiny"}, {"id": "be4d8afe35644849816dcbaa3072cf36", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:account:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/be4d8afe35644849816dcbaa3072cf36", "join_method": "created", "status": "active", "joined_at": "2023-07-20T01:01:22+00:00", "name": "ResourceGovernanceTest001"}], "page_info": {"current_count": 2}}
2025-03-21 16:00:36,962 - custodian.huaweicloud.query - INFO - client res : [{'id': '8e5fe930d8454674a47c67abfb72e02c', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:account:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/8e5fe930d8454674a47c67abfb72e02c', 'join_method': 'invited', 'status': 'active', 'joined_at': '2023-07-20T02:07:56+00:00', 'name': 'hwstaff_intl_tiny'}, {'id': 'be4d8afe35644849816dcbaa3072cf36', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:account:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/be4d8afe35644849816dcbaa3072cf36', 'join_method': 'created', 'status': 'active', 'joined_at': '2023-07-20T01:01:22+00:00', 'name': 'ResourceGovernanceTest001'}]
2025-03-21 16:00:36,968 - custodian.policy - INFO - policy:create-and-attach-scp-for-account resource:huaweicloud.org-account region: count:2 time:0.91
2025-03-21 16:00:36,969 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp self : {'type': 'set-policy', 'policy-type': 'service_control_policy', 'name': 'RestrictedForAccount', 'contents': {'Version': '5.0', 'Statement': [{'Sid': 'RestrictedForAccount', 'Effect': 'Deny', 'Action': ['ecs:*'], 'Resource': ['*']}]}}
2025-03-21 16:00:36,973 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager.resources : [{'is_builtin': False, 'description': '', 'id': 'p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-4ncc1gg34kj8iis5479yc1ezymno5slt', 'name': 'tag-tmuntces', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-6xl08arqnm0b5vs7w8uailwxbplayh0k', 'name': '7777777777777777777', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '776578538', 'id': 'p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-8cpac5vs39noe5lmz1khmiyplpeha7up', 'name': 'tag-lbvxbzdq', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-bgfqjbom76psqgww4an4a1p0m0yqxb68', 'name': 'tag-b9vfcca0', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-c6c8cm4g9ram5mc2xf91a8wu4swsfune', 'name': 'tag-mm9kot2h', 'type': 'tag_policy'}, {'is_builtin': False, 'description': 'RestrictedRootAccount (custodian managed)', 'id': 'p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-eo4w7f2yby7va7ueioccfpqij71hg67a', 'name': 'RestrictedRootAccount', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fjjdk6wpao1zsv4ys3mjaauvmaf10ssj', 'name': 'tag-nf509hch', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-fr3ygynl5ui03a8zktvs4yu7noh1jgbh', 'name': 'tag-uwp06af6', 'type': 'tag_policy'}, {'is_builtin': True, 'description': 'Full Access,', 'id': 'p-full_access', 'urn': 'organizations::system:policy:service_control_policy/p-full_access', 'name': 'FullAccess', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-hx6wedi5glocyomkl4bp2xu2habx10m1', 'name': 'scp-3j5xtatc', 'type': 'service_control_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-i66dugaf17fxv5e5f4oafupnmq6bw6wr', 'name': 'tag-tubob1js', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-mm7qr3d5tlwbiq766gpo984x49k0vvjt', 'name': 'tag-v3k5m4du', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-p1l1qyxoxjcn6ay7mxxgnaz2efvogqkn', 'name': 'tag-1b8591c8', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-ttjg3krytog1n7g2jlbkaqjczgiwza65', 'name': 'tag-xi0xlt2n', 'type': 'tag_policy'}, {'is_builtin': False, 'description': '', 'id': 'p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'urn': 'organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/tag_policy/p-zwtlsgcxfg5xxmyxtx92vquzcvysssa9', 'name': 'tag-0qoa9k2q', 'type': 'tag_policy'}]
2025-03-21 16:00:36,976 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy request : {"body": {"content": "{\"Version\": \"5.0\", \"Statement\": [{\"Sid\": \"RestrictedForAccount\", \"Effect\": \"Deny\", \"Action\": [\"ecs:*\"], \"Resource\": [\"*\"]}]}", "description": "RestrictedForAccount (custodian managed)", "name": "RestrictedForAccount", "type": "service_control_policy", "tags": [{"key": "managed-by", "value": "CloudCustodian"}]}}
2025-03-21 16:00:38,046 - custodian.huaweicloud.resources.organizations - INFO - ensure_scp pmanager create_policy response : {"policy": {"content": "{\"Version\":\"5.0\",\"Statement\":[{\"Sid\":\"RestrictedForAccount\",\"Effect\":\"Deny\",\"Action\":[\"ecs:*\"],\"Resource\":[\"*\"]}]}", "policy_summary": {"is_builtin": false, "description": "RestrictedForAccount (custodian managed)", "id": "p-lptqjkre2shvxntrkfimr8kxx3ivikea", "urn": "organizations::be4d8afe35644849816dcbaa3072cf36:policy:o-wyla9th3pyv5ni3z8ud554k23jvrr22e/service_control_policy/p-lptqjkre2shvxntrkfimr8kxx3ivikea", "name": "RestrictedForAccount", "type": "service_control_policy"}}}
2025-03-21 16:00:38,540 - custodian.policy - INFO - policy:create-and-attach-scp-for-account action:setpolicy resources:2 execution_time:1.57
